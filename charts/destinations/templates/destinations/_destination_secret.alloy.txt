{{ define "grafana-telemetry-collector.config.destination.remote_kubernetes_secret" }}
{{- $secretName := (include "grafana-telemetry-collector.helper.k8s_name" .name) }}
{{- if and (hasKey .values "secret") .values.secret.name }}
{{- $secretName = .values.secret.name }}
{{- end }}

{{- $secretNamespace := .namespace }}
{{- if and (hasKey .values "secret") .values.secret.namespace }}
{{- $secretNamespace = .values.secret.namespace }}
{{- end }}
remote.kubernetes.secret {{ include "alloy_name" .name | quote }} {
  name = {{ $secretName | quote }}
  namespace {{ $secretNamespace | quote }}
}
{{ end }}
